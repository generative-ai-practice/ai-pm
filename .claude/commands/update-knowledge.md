---
description: 各リポジトリの知見をdata/knowledge/に蓄積・更新する
disable-model-invocation: true
---

# ナレッジ更新コマンド

直前の作業（Slack分析、Issue確認、PR確認など）で得た知見を `data/knowledge/` に蓄積する。

---

## Step 1: 既存ナレッジの読み込み

1. `data/knowledge/` ディレクトリが存在しなければ作成する。
2. 対象リポジトリのナレッジファイル `data/knowledge/{repo名}.md` があれば読み込む。

---

## Step 2: 知見の整理・追記

直前の会話コンテキストから得られた知見を整理し、各リポジトリのナレッジファイルに追記する。

### ナレッジファイルのフォーマット

```markdown
# {owner}/{repo} ナレッジ

## 主要Issue/PR
- #{番号}: {タイトル} ({OPEN/CLOSED})
  - {概要・ポイントを1-3行で}
  - 最終更新: {日付}

## 決定事項
- {日付}: {決定内容}（{根拠: Slack/Issue/PR URL}）

## 進行中の取り組み
- {内容}（{関連Issue/PR}）

## 未解決の課題
- {内容}（{関連Slack/Issue URL}）

## メモ
- {その他の知見}
```

### 更新ルール
- **追記が基本**: 既存の内容は削除せず、新しい情報を追記する。
- **重複回避**: 同じ情報が既にあれば追記しない。ステータスが変わった場合は更新する。
- **日付を必ず記録**: いつ時点の情報かわかるようにする。
- **根拠を明示**: Slack タイムスタンプ、Issue/PR URL など出典を記載する。
- **CLOSED/完了したものはアーカイブ**: 「主要Issue/PR」のステータスを更新し、完了したものは取り消し線や (CLOSED) で明示する。

---

## Step 3: ファイル保存

1. 更新した各ナレッジファイルを `data/knowledge/{repo名}.md` に保存する。
2. 更新内容のサマリーをユーザーに報告する。

---

## Step 4: 改善提案

今回の作業を振り返り、以下の観点で改善提案を行う:

- **分析精度**: 見落としや誤検出はなかったか？
- **コマンド・ワークフロー**: `/analyze-slack` や他のコマンドの改善案はあるか？
- **ナレッジの充実度**: 不足している知見、今後蓄積すべき情報はあるか？
- **自動化の余地**: 手動で行っている作業で自動化できるものはあるか？

改善提案は箇条書きでユーザーに提示する。

---

## 重要なルール

- **既存内容を削除しない**: 追記・更新のみ。削除はユーザーの明示的な指示がある場合のみ。
- **日本語で出力**: ナレッジファイルはすべて日本語で記述する。
- **data/knowledge/ はgit管理外**: `.gitignore` に `data/` が含まれていることを確認する。
